{% extends "base.html" %}
{% block content %}
<style>
  .register-glass {
    background: rgba(34, 34, 40, 0.92);
    border-radius: 1.5rem;
    box-shadow: 0 8px 32px 0 #1a003a33;
    border: 1.5px solid rgba(127, 0, 255, 0.16);
    backdrop-filter: blur(10px);
    transition: box-shadow 0.2s cubic-bezier(.4, 2, .6, 1);
  }

  .register-glass:hover {
    box-shadow: 0 0 32px #E100FF99, 0 2px 40px #7F00FF55;
    transform: translateY(-4px) scale(1.01);
  }

  .register-icon {
    background: linear-gradient(90deg, #00F2FE 0%, #7F00FF 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 2.8rem;
    margin-bottom: 0.7rem;
    animation: bounceIn 1.1s;
    display: inline-block;
  }

  .form-label {
    font-weight: 700;
    color: #00F2FE;
    letter-spacing: 0.03em;
  }

  .form-control {
    border-radius: 1rem;
    background: rgba(255, 255, 255, 0.06);
    color: #fff;
    border: 1.5px solid #7F00FF44;
    transition: border-color 0.2s;
  }

  .form-control:focus {
    border-color: #00F2FE;
    box-shadow: 0 0 8px #00F2FE99;
    background: rgba(255, 255, 255, 0.12);
    color: #fff;
  }

  .input-group-text {
    background: transparent;
    border: none;
    color: #00F2FE;
    font-size: 1.15rem;
    transition: color 0.2s;
  }

  .input-group-text .bi {
    transition: transform 0.2s;
  }

  .form-control:focus+.input-group-text .bi,
  .input-group:focus-within .bi {
    color: #E100FF;
    transform: scale(1.13) rotate(-7deg);
  }

  .btn-register {
    font-weight: 700;
    font-size: 1.1rem;
    border-radius: 2rem;
    background: linear-gradient(90deg, #00F2FE 0%, #7F00FF 100%);
    color: #181828;
    box-shadow: 0 0 24px #E100FF55;
    transition: background 0.2s, color 0.2s, transform 0.15s;
  }

  .btn-register:hover,
  .btn-register:focus {
    background: linear-gradient(90deg, #E100FF 0%, #00F2FE 100%);
    color: #fff;
    transform: scale(1.04) translateY(-2px);
    box-shadow: 0 0 32px #E100FF;
  }

  .register-link {
    color: #00F2FE;
    text-decoration: underline;
    font-weight: 600;
    transition: color 0.2s;
  }

  .register-link:hover {
    color: #E100FF;
    text-shadow: 0 0 8px #E100FF;
  }

  .spinner-border {
    margin-left: 0.8rem;
    vertical-align: middle;
  }

  @media (max-width: 767px) {
    .register-glass {
      padding: 1.5rem 0.7rem;
    }

    .register-icon {
      font-size: 2.1rem;
    }
  }

  @keyframes bounceIn {
    0% {
      transform: scale(.3);
      opacity: 0;
    }

    50% {
      transform: scale(1.05);
      opacity: 1;
    }

    70% {
      transform: scale(.9);
    }

    100% {
      transform: scale(1);
    }
  }
</style>

<div class="container d-flex flex-column justify-content-center align-items-center">
  <div class="col-12 col-sm-10 col-md-7 col-lg-5">
    <div class="register-glass shadow-lg p-4 animate__animated animate__fadeInDown">
      <div class="text-center mb-4">
        <span class="register-icon">
          <i class="bi bi-person-plus-fill"></i>
        </span>
        <h2 class="fw-bold mb-2" style="letter-spacing:0.02em;">Create Your Account</h2>
        <p class="mb-0" style="color:#bbb;">Join the <span style="color:#00F2FE;font-weight:700;">AI Art</span>
          revolution!</p>
      </div>


      <form method="POST" onsubmit="disableButton()">
        {{ form.hidden_tag() }}


        <div class="mb-3">
          {{ form.username.label(class="form-label") }}
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-person"></i></span>
            {{ form.username(class="form-control", placeholder="Enter your username") }}
          </div>
        </div>


        <div class="mb-3">
          {{ form.email.label(class="form-label") }}
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-envelope"></i></span>
            {{ form.email(class="form-control", placeholder="Enter your email") }}
          </div>
        </div>


        <div class="mb-3">
          {{ form.password.label(class="form-label") }}
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-lock"></i></span>
            {{ form.password(class="form-control", placeholder="Create a password") }}
          </div>
        </div>


        <div class="mb-3">
          {{ form.confirm_password.label(class="form-label") }}
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
            {{ form.confirm_password(class="form-control", placeholder="Confirm your password") }}
          </div>
        </div>


        <div class="d-grid gap-2 mt-4">
          <button id="registerBtn" type="submit" class="btn btn-register btn-lg">
            <i class="bi bi-person-plus me-2"></i>{{ form.submit.label.text }}
          </button>
          <div class="text-center">
            <div class="spinner-border text-info" id="loadingSpinner" role="status" style="display:none;"></div>
          </div>
        </div>
      </form>

      <div class="mt-4 text-center">
        <p class="mb-1" style="color:#bbb;">
          Already have an account?
          <a href="{{ url_for('main.login') }}" class="register-link">Login</a>
        </p>
      </div>
    </div>
  </div>
</div>

<script>

  function disableButton() {
    document.getElementById('registerBtn').disabled = true;
    document.getElementById('loadingSpinner').style.display = 'inline-block';
  }
</script>
{% endblock %}